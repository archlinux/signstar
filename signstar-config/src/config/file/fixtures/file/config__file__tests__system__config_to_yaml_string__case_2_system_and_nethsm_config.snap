---
source: signstar-config/src/config/file/mod.rs
description: Configuration with system-wide and NetHSM configuration
expression: config_str
---
system:
  iteration: 1
  admin_secret_handling:
    shamirs-secret-sharing:
      number_of_shares: 3
      threshold: 2
  non_admin_secret_handling: systemd-creds
  mappings:
    - share_holder:
        system_user: share-holder1
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAN54Gd1jMz+yNDjBRwX1SnOtWuUsVF64RJIeYJ8DI7b
          user@host
    - share_holder:
        system_user: share-holder2
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPDgwGfIRBAsOUuDEZw/uJQZSwOYr4sg2DAZpcc7MfOj
          user@host
    - share_holder:
        system_user: share-holder3
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILWqWyMCk5BdSl1c3KYoLEokKr7qNVPbI1IbBhgEBQj5
          user@host
    - wire_guard_download:
        system_user: wireguard-downloader
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOh9BTe81DC6A0YZALsq9dWcyl6xjjqlxWPwlExTFgBt
          user@host
nethsm:
  connections:
    - url: https://nethsm1.example.org/
      tls_security: Unsafe
    - url: https://nethsm2.example.org/
      tls_security: Unsafe
  mappings:
    - admin: admin
    - backup:
        backend_user: backup
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINrIYA+bfMBThUP5lKbMFEHiytmcCPhpkGrB/85n0mAN
          user@host
        system_user: backup-user
    - metrics:
        backend_users:
          metrics_user: metrics
          operator_users:
            - keymetrics
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPkpXKiNhy39A3bZ1u19a5d4sFwYMBkWQyCbzgUfdKBm
          user@host
        system_user: metrics-user
    - signing:
        backend_user: signing
        signing_key_id: signing1
        key_setup:
          key_type: Curve25519
          key_mechanisms:
            - EdDsaSignature
          signature_type: EdDsa
          key_context:
            openpgp:
              user_ids:
                - Foobar McFooface <foobar@mcfooface.org>
              version: "4"
        ssh_authorized_key: >-
          ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOh96uFTnvX6P1ebbLxXFvy6sK7qFqlMHDOuJ0TmuXQQ
          user@host
        system_user: signing-user
        tag: signing1
